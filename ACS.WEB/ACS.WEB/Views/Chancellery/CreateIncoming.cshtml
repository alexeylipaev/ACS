@model ACS.WEB.ViewModels.IncomingCorrespondencyInput
@{

    Layout = "~/Views/Shared/_LayoutChancellery.cshtml";
}
@Scripts.Render("~/bundles/fileInput")
@Styles.Render("~/Content/fileInput/css")

<h2>@ViewBag.TypeName</h2>
@using (Html.BeginForm("CreateIncoming", "Chancellery", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @*@Html.HiddenFor(m => m.TypeRecordChancelleryId)*@
    <div class="form-horizontal">
        <h4>@ViewBag.ActionName</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.RegistrationNumber, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.RegistrationNumber, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.RegistrationNumber, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.DateRegistration, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.DateRegistration, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.DateRegistration, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Summary, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Summary, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Summary, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.Notice, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Notice, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Notice, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ResponsibleEmployees, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.ListBoxFor(model => model.ResponsibleEmployees, new MultiSelectList(ViewBag.EmplCollection, "id", "FullName"), new { @class = "chosen", multiple = "multiple", data_placeholder = "Выберите ответственного" })
              
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.JournalRegistrationsChancelleryId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <abbr class="search-choice-close"></abbr>
                @Html.DropDownListFor(model => model.JournalRegistrationsChancelleryId, new SelectList(ViewBag.JournalCollection, "id", "Name"), "Выберите журнал", new { @class = "chosen", data_placeholder = "Выберите журнал" })
        
                @Html.ValidationMessageFor(model => model.JournalRegistrationsChancelleryId, "", new { @class = "text-danger" })

            </div>

        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.FolderChancelleryId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.FolderChancelleryId, new SelectList(ViewBag.FolderCollection, "id", "Name"), "Выберите папку", new { @class = "chosen", data_placeholder = "Выберите папку" })
           
                @Html.ValidationMessageFor(model => model.FolderChancelleryId, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.To_EmployeeId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.To_EmployeeId, new SelectList(ViewBag.EmplCollection, "id", "FullName"), "Выберите работника", htmlAttributes: new { @class = "chosen", data_placeholder = "Выберите работника" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.From_ExternalOrganizationChancelleryId, htmlAttributes: new { @class = "control-label col-md-2" })

            <div class="col-md-10">
                @Html.DropDownListFor(model => model.From_ExternalOrganizationChancelleryId, new SelectList(ViewBag.ExtOrgsCollection, "id", "Name"), "Выберите организацию", new { @class = "chosen", data_placeholder = "Выберите организацию" })
            </div>
        </div>

        <div class="form-group">
            @*@Html.LabelFor(model => model.Path, htmlAttributes: new { @class = "control-label col-md-2" })*@
            <div class="col-md-10">
                <input type="file" name="Files" id="Files" multiple />
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Создать" class="btn btn-default" />
            </div>
        </div>
    </div>

}

<div>
    @Html.ActionLink("Назад к списку", "Incoming")
</div>
@section scripts
{
    <script>
    $(document).ready(function () {
        // initialize with defaults
        $("#Files").fileinput();

        // with plugin options
        $("#Files").fileinput({ 'showUpload': false, 'previewFileType': 'any' });
    });
    </script>
    <script>
        $(function () {
            $('.chosen').chosen({
                width: '30%',
                allow_single_deselect: true,
                no_results_text: "Ничего не найдено!",
                disable_search_threshold: 5,
                placeholder_text_multiple: 'Выберите объекты',
                placeholder_text_single: 'Выберите объект',
            });
        });
    </script>
}